"""中文繁简转换工具"""

from typing import Dict


class ChineseConverter:
    """中文繁简转换器（简化版）"""
    
    # 常用繁简对照表（可以扩展）
    SIMPLIFIED_TO_TRADITIONAL = {
        # 词组（优先匹配 - 放在最前面）
        '服务器': '伺服器', '网络': '網絡', '数据': '數據', '系统': '系統', 
        '软件': '軟件', '电脑': '電腦', '计算': '計算', '资料': '資料', 
        '档案': '檔案', '内容': '內容', '网页': '網頁', '检索': '檢索', 
        '查询': '查詢', '获取': '獲取', '处理': '處理', '设计': '設計',
        '开发': '開發', '应用': '應用', '代码': '代碼', '编程': '編程', 
        '编码': '編碼', '选项': '選項', '选择': '選擇', '设置': '設置',
        '默认': '默認', '当前': '當前', '更新': '更新', '发布': '發布', 
        '协议': '協議', '标准': '標準', '规范': '規範', '模块': '模組', 
        '组件': '組件', '扩展': '擴展', '解决': '解決', '解决方案': '解決方案',
        '文件名': '檔案名', '文件夹': '資料夾', '图片': '圖片', '图像': '圖像',
        '视频': '視頻', '音频': '音頻', '网站': '網站', '浏览': '瀏覽',
        '浏览器': '瀏覽器', '搜索引擎': '搜尋引擎', '数据库': '資料庫',
        '数据分析': '數據分析', '网页解析': '網頁解析', '文件搜索': '檔案搜索',
        
        # 常用单字
        '个': '個', '为': '為', '会': '會', '来': '來', '说': '說',
        '这': '這', '那': '那', '从': '從', '时': '時', '能': '能',
        '关': '關', '国': '國', '们': '們', '对': '對', '发': '發',
        '理': '理', '现': '現', '应': '應', '当': '當', '与': '與',
        '种': '種', '样': '樣', '开': '開', '长': '長', '经': '經',
        '进': '進', '电': '電', '过': '過', '远': '遠', '让': '讓',
        '头': '頭', '动': '動', '学': '學', '业': '業', '体': '體',
        '没': '沒', '问': '問', '听': '聽', '马': '馬', '东': '東',
        '车': '車', '边': '邊', '气': '氣', '历': '歷', '华': '華',
        '严': '嚴', '产': '產', '务': '務', '员': '員', '门': '門',
        '实': '實', '机': '機', '见': '見', '决': '決', '书': '書',
        '议': '議', '众': '眾', '团': '團', '处': '處', '场': '場',
        '导': '導', '级': '級', '军': '軍', '义': '義', '网': '網',
        '专': '專', '农': '農', '医': '醫', '单': '單', '双': '雙',
        '组': '組', '态': '態', '总': '總', '县': '縣', '担': '擔',
        '战': '戰', '党': '黨', '广': '廣', '传': '傳', '写': '寫',
        '号': '號', '带': '帶', '质': '質', '响': '響', '认': '認',
        '节': '節', '观': '觀', '际': '際', '权': '權', '变': '變',
        '语': '語', '评': '評', '话': '話', '读': '讀', '页': '頁',
        '课': '課', '题': '題', '讲': '講', '谈': '談', '调': '調',
        '请': '請', '谢': '謝', '买': '買', '卖': '賣', '贝': '貝',
        '账': '賬', '财': '財', '货': '貨', '贵': '貴', '费': '費',
        '资': '資', '贷': '貸', '贸': '貿', '赏': '賞', '赛': '賽',
        '赢': '贏', '购': '購', '还': '還', '运': '運', '连': '連',
        '达': '達', '选': '選', '适': '適', '速': '速', '送': '送',
        '通': '通', '造': '造', '迈': '邁', '迟': '遲', '迹': '跡',
        '退': '退', '逃': '逃', '递': '遞', '途': '途', '解': '解',
        '邮': '郵', '都': '都', '配': '配', '酒': '酒', '酿': '釀',
        '释': '釋', '量': '量', '钱': '錢', '钟': '鐘', '铁': '鐵',
        '钢': '鋼', '银': '銀', '销': '銷', '锁': '鎖', '镇': '鎮',
        '错': '錯', '链': '鏈', '录': '錄', '锦': '錦', '键': '鍵',
        '锋': '鋒', '镜': '鏡', '难': '難', '雪': '雪', '雾': '霧',
        '震': '震', '需': '需', '静': '靜', '非': '非', '靠': '靠',
        '响': '響', '领': '領', '颇': '頗', '频': '頻', '析': '析',
        '额': '額', '风': '風', '飞': '飛', '养': '養', '馆': '館',
        '验': '驗', '骂': '罵', '鸟': '鳥', '鸡': '雞', '鸣': '鳴',
        '凤': '鳳', '鸭': '鴨', '鸿': '鴻', '鹅': '鵝', '鹰': '鷹',
        '鹿': '鹿', '麦': '麥', '黄': '黃', '黑': '黑', '默': '默',
        '鼓': '鼓', '鼠': '鼠', '齐': '齊', '齿': '齒', '龄': '齡',
        '龙': '龍', '龟': '龜',
    }
    
    @classmethod
    def to_traditional(cls, simplified_text: str) -> str:
        """
        简体转繁体
        
        Args:
            simplified_text: 简体中文文本
        
        Returns:
            繁体中文文本
        """
        if not simplified_text:
            return simplified_text
        
        result = simplified_text
        
        # 优先匹配词组
        for simp, trad in sorted(
            cls.SIMPLIFIED_TO_TRADITIONAL.items(),
            key=lambda x: len(x[0]),
            reverse=True
        ):
            result = result.replace(simp, trad)
        
        return result
    
    @classmethod
    def convert_multi_lang_array(cls, content_zh_cn: str) -> list:
        """
        生成多语言数组（简体、繁体、英文）
        
        Args:
            content_zh_cn: 简体中文内容
        
        Returns:
            多语言数组
        """
        content_zh_tw = cls.to_traditional(content_zh_cn)
        
        return [
            {"type": 1, "content": content_zh_cn},  # 简体
            {"type": 2, "content": content_zh_tw},  # 繁体
        ]


# 可选：使用第三方库进行更准确的转换
def use_opencc_if_available():
    """如果安装了opencc，使用更准确的转换"""
    try:
        import opencc
        converter = opencc.OpenCC('s2t.json')  # 简体到繁体
        return converter
    except ImportError:
        return None


# 测试代码
if __name__ == '__main__':
    converter = ChineseConverter()
    
    test_texts = [
        "智能文件搜索服务器",
        "基于 Model Context Protocol 的文件搜索解决方案，高效支持文件名和内容检索。",
        "数据分析MCP服务器",
        "网页解析服务",
    ]
    
    print("=" * 60)
    print("繁简转换测试")
    print("=" * 60)
    
    for text in test_texts:
        traditional = converter.to_traditional(text)
        print(f"\n简体: {text}")
        print(f"繁体: {traditional}")

