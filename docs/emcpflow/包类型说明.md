# åŒ…ç±»å‹è¯´æ˜

## EMCP PackageType æšä¸¾

æ ¹æ® EMCP å¹³å°å®šä¹‰ï¼š

```csharp
public enum PackageType
{
    [Msg("npx", "npx")]
    npx = 1,

    [Msg("uvx", "uvx")]
    uvx = 2,

    [Msg("deno", "deno")]
    deno = 3,

    [Msg("container", "container")]
    container = 4,

    [Msg("npx", "npx")]
    direct_proxy = 6,

    [Msg("npx", "npx")]
    adaptive_proxy = 7,
}
```

---

## EMCPFlow åŒ…ç±»å‹æ˜ å°„

### æ”¯æŒçš„åŒ…ç±»å‹

| åŒ…ç®¡ç†å™¨ | package_type | å‘½ä»¤å·¥å…· | å¯åŠ¨å‘½ä»¤ç¤ºä¾‹ |
|---------|-------------|---------|-------------|
| **NPM** | 1 (npx) | npx | `npx package-name` âœ… |
| **PyPI** | 2 (uvx) | uvx | `uvx package-name` âœ… |
| **Deno** | 3 (deno) | deno | `deno package-name` âœ… |
| **Docker** | 4 (container) | docker | `(ç©º)` |
| **Direct Proxy** | 6 | - | ç›´æ¥ä»£ç† |
| **Adaptive Proxy** | 7 | - | è‡ªé€‚åº”ä»£ç† |

---

## ä»£ç æ˜ å°„

### emcpflow_simple_gui.py

```python
package_type_map = {
    'npm': 1,      # npx
    'pypi': 2,     # uvx (Python)
    'deno': 3,     # deno
    'docker': 4,   # container
}
```

### ai_generator.py

```python
def _generate_command(package_name: str, package_type: str) -> str:
    """
    æ ¹æ®åŒ…ç±»å‹ç”Ÿæˆå¯åŠ¨å‘½ä»¤
    """
    if package_type == 'npm':
        # npx: ç›´æ¥ä½¿ç”¨åŒ…å
        return package_name
    
    elif package_type == 'pypi':
        # uvx: ç›´æ¥ä½¿ç”¨åŒ…å
        # uvx ä¼šè‡ªåŠ¨ä» PyPI å®‰è£…å¹¶è¿è¡Œ
        return package_name
    
    elif package_type == 'deno':
        # deno: ç›´æ¥ä½¿ç”¨åŒ…å
        return package_name
    
    elif package_type == 'docker':
        # container: ä¸éœ€è¦å‘½ä»¤ï¼ˆå®¹å™¨è‡ªåŠ¨å¯åŠ¨ï¼‰
        return ""
    
    else:
        return package_name
```

---

## ä½¿ç”¨è¯´æ˜

### NPM åŒ… (package_type = 1)

**ç¤ºä¾‹**ï¼š
```
åŒ…å: @bachstudio/mcp-file-search
ç±»å‹: NPM (1 - npx)
å‘½ä»¤: npx @bachstudio/mcp-file-search âœ…

æ‰§è¡Œ: npx @bachstudio/mcp-file-search
```

### PyPI åŒ… (package_type = 2)

**ç¤ºä¾‹**ï¼š
```
åŒ…å: requests
ç±»å‹: PyPI (2 - uvx)
å‘½ä»¤: uvx requests âœ…

æ‰§è¡Œ: uvx requests
```

**æ³¨æ„**ï¼š
- æ—§ç‰ˆæœ¬ä½¿ç”¨ `python -m package_name`
- æ–°ç‰ˆæœ¬ä½¿ç”¨ `uvx package-name`
- uvx æ˜¯ç°ä»£åŒ–çš„ Python åŒ…æ‰§è¡Œå·¥å…·

### Deno åŒ… (package_type = 3)

**ç¤ºä¾‹**ï¼š
```
åŒ…å: deno-package
ç±»å‹: Deno (3 - deno)
å‘½ä»¤: deno-package

æ‰§è¡Œ: deno run deno-package
```

### Docker å®¹å™¨ (package_type = 4)

**ç¤ºä¾‹**ï¼š
```
é•œåƒ: nginx/nginx
ç±»å‹: Docker (4 - container)
å‘½ä»¤: (ç©º) âœ…

æ‰§è¡Œ: docker run nginx/nginx (EMCPè‡ªåŠ¨å¤„ç†)
```

---

## å…³äº uvx

### ä»€ä¹ˆæ˜¯ uvxï¼Ÿ

**uvx** æ˜¯ uv å·¥å…·é›†çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå¿«é€Ÿè¿è¡Œ Python åŒ…ã€‚

**ç‰¹ç‚¹**ï¼š
- âœ… å¿«é€Ÿï¼šæ¯” pipx å¿« 10-100 å€
- âœ… è‡ªåŠ¨ï¼šè‡ªåŠ¨å®‰è£…ä¾èµ–
- âœ… éš”ç¦»ï¼šæ¯ä¸ªåŒ…ç‹¬ç«‹ç¯å¢ƒ
- âœ… ç°ä»£ï¼šPython ç¤¾åŒºæ–°æ ‡å‡†

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# ç›´æ¥è¿è¡Œ PyPI åŒ…ï¼ˆæ— éœ€é¢„å…ˆå®‰è£…ï¼‰
uvx package-name

# ç­‰åŒäº
pip install package-name
package-name
```

**å¯¹æ¯”**ï¼š
| å·¥å…· | é€Ÿåº¦ | éš”ç¦» | æ¨èåº¦ |
|-----|------|------|--------|
| **uvx** | æå¿« | âœ… | â­â­â­â­â­ |
| **pipx** | å¿« | âœ… | â­â­â­â­ |
| **pip** | ä¸€èˆ¬ | âŒ | â­â­â­ |

---

## è¿ç§»è¯´æ˜

### ä»æ—§å‘½ä»¤æ ¼å¼è¿ç§»

**æ—§ç‰ˆæœ¬**ï¼š
```python
# PyPI åŒ…å‘½ä»¤
command = f"python -m {module_name}"
# ä¾‹å¦‚: python -m bachai_data_analysis_mcp
```

**æ–°ç‰ˆæœ¬**ï¼š
```python
# PyPI åŒ…å‘½ä»¤
command = package_name
# ä¾‹å¦‚: bachai-data-analysis-mcp
# EMCP ä¼šä½¿ç”¨: uvx bachai-data-analysis-mcp
```

**å…¼å®¹æ€§**ï¼š
- EMCP å¹³å°ä¼šæ ¹æ® package_type è‡ªåŠ¨é€‰æ‹©æ‰§è¡Œå·¥å…·
- package_type=2 â†’ ä½¿ç”¨ uvx
- æ— éœ€æ‹…å¿ƒå‘½ä»¤æ ¼å¼

---

## ğŸ“‹ æ›´æ–°çš„æ–‡ä»¶

### 1. emcpflow_simple_gui.py
- âœ… æ›´æ–° `package_type_map`
- âœ… æ·»åŠ æ³¨é‡Šè¯´æ˜

### 2. ai_generator.py
- âœ… æ›´æ–° `_generate_command()` æ–¹æ³•
- âœ… PyPI åŒ…ä½¿ç”¨åŒ…åï¼ˆä¸å†æ˜¯ `python -m`ï¼‰
- âœ… æ·»åŠ è¯¦ç»†æ³¨é‡Š

### 3. emcp_manager.py
- âœ… æ›´æ–° `package_type_map`
- âœ… æ›´æ–°å‘½ä»¤ç”Ÿæˆé€»è¾‘
- âœ… æ·»åŠ  deno, direct_proxy, adaptive_proxy æ”¯æŒ

### 4. åŒ…ç±»å‹è¯´æ˜.md (æ–°å¢)
- âœ… è¯¦ç»†çš„åŒ…ç±»å‹è¯´æ˜
- âœ… å‘½ä»¤ç”Ÿæˆè§„åˆ™
- âœ… uvx ä½¿ç”¨è¯´æ˜

---

## âœ… æµ‹è¯•éªŒè¯

### NPM åŒ…æµ‹è¯•

```
è¾“å…¥: express
åŒ…ç±»å‹: NPM (1)
å‘½ä»¤: express
âœ… æ­£ç¡®
```

### PyPI åŒ…æµ‹è¯•

```
è¾“å…¥: requests
åŒ…ç±»å‹: PyPI (2)
å‘½ä»¤: requests
âœ… æ­£ç¡®ï¼ˆä½¿ç”¨ uvxï¼‰
```

### Docker æµ‹è¯•

```
è¾“å…¥: nginx/nginx
åŒ…ç±»å‹: Docker (4)
å‘½ä»¤: (ç©º)
âœ… æ­£ç¡®
```

---

## ğŸ¯ æ€»ç»“

### åŒ…ç±»å‹å®Œæ•´æ”¯æŒ

- âœ… NPM (npx) - package_type = 1
- âœ… PyPI (uvx) - package_type = 2 â­ å·²æ›´æ–°
- âœ… Deno (deno) - package_type = 3
- âœ… Docker (container) - package_type = 4
- âœ… Direct Proxy - package_type = 6
- âœ… Adaptive Proxy - package_type = 7

### å‘½ä»¤ç”Ÿæˆè§„åˆ™

- NPM: `package-name` â†’ `npx package-name`
- PyPI: `package-name` â†’ `uvx package-name` â­
- Deno: `package-name` â†’ `deno run package-name`
- Docker: `(ç©º)` â†’ EMCP è‡ªåŠ¨å¤„ç†

---

**æ‰€æœ‰åŒ…ç±»å‹å·²æ­£ç¡®æ˜ å°„ï¼** âœ…

