# GitHub å®‰å…¨è®¾ç½®æŒ‡å—

## ğŸ” æ¨èçš„å®‰å…¨é…ç½®

RepoFlow åˆ›å»ºçš„ä»“åº“ä¼šè‡ªåŠ¨é…ç½®ä»¥ä¸‹å®‰å…¨åŠŸèƒ½ï¼š

### 1. æ¼æ´è­¦æŠ¥ï¼ˆVulnerability Alertsï¼‰

**æ‰€æœ‰ä»“åº“è‡ªåŠ¨å¯ç”¨** âœ… ğŸ†“

æ£€æµ‹ä¾èµ–åŒ…ä¸­çš„å·²çŸ¥æ¼æ´ï¼Œå¹¶è‡ªåŠ¨åˆ›å»º Dependabot è­¦æŠ¥ã€‚

### 2. Secret Scanningï¼ˆå¯†é’¥æ‰«æï¼‰

| ä»“åº“ç±»å‹ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| **å…¬å¼€ä»“åº“** | ğŸ†“ å…è´¹ | è‡ªåŠ¨å¯ç”¨ï¼Œæ— éœ€é…ç½® |
| **ç§æœ‰ä»“åº“** | ğŸ’° ä»˜è´¹ | éœ€è¦ GitHub Advanced Security |

æ£€æµ‹æäº¤ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼ˆAPI Keysã€Tokensã€å¯†ç ç­‰ï¼‰ã€‚

### 3. Push Protectionï¼ˆæ¨é€ä¿æŠ¤ï¼‰

| ä»“åº“ç±»å‹ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| **å…¬å¼€ä»“åº“** | ğŸ†“ å…è´¹ | åŸºäº Secret Scanning |
| **ç§æœ‰ä»“åº“** | ğŸ’° ä»˜è´¹ | éœ€è¦ GitHub Advanced Security |

é˜»æ­¢åŒ…å«æ•æ„Ÿä¿¡æ¯çš„æäº¤è¢«æ¨é€åˆ° GitHubã€‚

---

## ğŸ¯ ä¸¤ç§é…ç½®æ–¹å¼

### æ–¹æ¡ˆ 1ï¼šä»“åº“çº§åˆ«é…ç½®ï¼ˆæ¨èï¼‰ğŸ†“

**é€‚ç”¨äºï¼šå…¬å¼€ä»“åº“**

1. è®¿é—®ä»“åº“è®¾ç½®ï¼š
   ```
   https://github.com/ä½ çš„ç»„ç»‡/ä½ çš„ä»“åº“/settings/security_analysis
   ```

2. å¯ç”¨ä»¥ä¸‹åŠŸèƒ½ï¼š

#### âœ… Dependency graphï¼ˆå…è´¹ï¼‰
- è‡ªåŠ¨åˆ†æé¡¹ç›®ä¾èµ–

#### âœ… Dependabot alertsï¼ˆå…è´¹ï¼‰
- æ¼æ´è­¦æŠ¥

#### âœ… Dependabot security updatesï¼ˆå…è´¹ï¼‰
- è‡ªåŠ¨åˆ›å»º PR ä¿®å¤æ¼æ´

#### âœ… Secret scanningï¼ˆå…¬å¼€ä»“åº“å…è´¹ï¼‰
- æ‰«ææ‰€æœ‰æäº¤ä¸­çš„æ•æ„Ÿä¿¡æ¯
- æ£€æµ‹å·²çŸ¥çš„ Token æ¨¡å¼
- æ”¯æŒ 200+ ç§å¯†é’¥ç±»å‹

#### âœ… Push protectionï¼ˆå…¬å¼€ä»“åº“å…è´¹ï¼‰
- **æœ€é‡è¦**ï¼šé˜»æ­¢åŒ…å«æ•æ„Ÿä¿¡æ¯çš„æ¨é€
- å®æ—¶æ£€æµ‹
- æç¤ºç”¨æˆ·åˆ é™¤æ•æ„Ÿä¿¡æ¯

**ä¼˜ç‚¹ï¼š**
- âœ… å®Œå…¨å…è´¹
- âœ… ç«‹å³å¯ç”¨
- âœ… æ— éœ€ç»„ç»‡æƒé™

---

### æ–¹æ¡ˆ 2ï¼šç»„ç»‡çº§åˆ«é…ç½®ï¼ˆç§æœ‰ä»“åº“ï¼‰ğŸ’°

**é€‚ç”¨äºï¼šç§æœ‰ä»“åº“**

éœ€è¦ GitHub Advanced Securityï¼ˆä»˜è´¹åŠŸèƒ½ï¼‰

1. è®¿é—®ç»„ç»‡è®¾ç½®ï¼š
   ```
   https://github.com/organizations/ä½ çš„ç»„ç»‡å/settings/security_analysis
   ```

2. å¯ç”¨ GitHub Advanced Security

3. ä¸ºæ‰€æœ‰ï¼ˆæˆ–æŒ‡å®šï¼‰ä»“åº“å¯ç”¨å®‰å…¨åŠŸèƒ½

**ä¼˜ç‚¹ï¼š**
- âœ… é€‚ç”¨äºç§æœ‰ä»“åº“
- âœ… ç»Ÿä¸€ç®¡ç†
- âœ… æ‰¹é‡é…ç½®

**ç¼ºç‚¹ï¼š**
- âŒ éœ€è¦ä»˜è´¹

---

## ğŸ›¡ï¸ å·¥ä½œåŸç†

### æ¨é€ä¿æŠ¤æµç¨‹

```
å¼€å‘è€…æäº¤ä»£ç 
     â†“
git push
     â†“
GitHub æ‰«ææäº¤å†…å®¹
     â†“
å‘ç°æ•æ„Ÿä¿¡æ¯ï¼Ÿ
     â”œâ”€ æ˜¯ â†’ âŒ é˜»æ­¢æ¨é€
     â”‚        â””â”€ æç¤ºç”¨æˆ·åˆ é™¤
     â””â”€ å¦ â†’ âœ… å…è®¸æ¨é€
```

### æ£€æµ‹çš„æ•æ„Ÿä¿¡æ¯ç±»å‹

| ç±»å‹ | ç¤ºä¾‹ |
|------|------|
| **GitHub Token** | `ghp_xxxxxxxxxxxx` |
| **AWS Access Key** | `AKIA...` |
| **Azure Secret** | `xxx` |
| **Google API Key** | `AIza...` |
| **Stripe API Key** | `sk_live_...` |
| **æ•°æ®åº“å¯†ç ** | `password=xxx` |
| **ç§é’¥** | `-----BEGIN PRIVATE KEY-----` |
| **JWT Token** | `eyJ...` |

**æ”¯æŒ 200+ ç§å¯†é’¥æ¨¡å¼ï¼**

---

## ğŸ“‹ é…ç½®æ£€æŸ¥æ¸…å•

### å¯¹äºå…¬å¼€ä»“åº“ï¼ˆæ¨èï¼‰ğŸ†“

ä»“åº“ç®¡ç†å‘˜ï¼š

- [ ] è®¿é—®ä»“åº“è®¾ç½® â†’ Security & analysis
- [ ] å¯ç”¨ Dependency graph âœ…
- [ ] å¯ç”¨ Dependabot alerts âœ…
- [ ] å¯ç”¨ Dependabot security updates âœ…
- [ ] å¯ç”¨ Secret scanning âœ…ï¼ˆå…è´¹ï¼‰
- [ ] å¯ç”¨ Push protection âœ…ï¼ˆå…è´¹ï¼‰
- [ ] é…ç½®åˆ†æ”¯ä¿æŠ¤è§„åˆ™
- [ ] ç¦æ­¢å¼ºåˆ¶æ¨é€ï¼ˆforce pushï¼‰

**ä¸€åˆ‡éƒ½æ˜¯å…è´¹çš„ï¼** ğŸ‰

---

### å¯¹äºç§æœ‰ä»“åº“ ğŸ’°

ç»„ç»‡ç®¡ç†å‘˜ï¼š

- [ ] è´­ä¹° GitHub Advanced Security
- [ ] è®¿é—®ç»„ç»‡å®‰å…¨è®¾ç½®
- [ ] å¯ç”¨ GitHub Advanced Security
- [ ] ä¸ºä»“åº“å¯ç”¨ Secret scanning
- [ ] ä¸ºä»“åº“å¯ç”¨ Push protection
- [ ] é…ç½®è‡ªå®šä¹‰ secret æ¨¡å¼ï¼ˆå¯é€‰ï¼‰

ä»“åº“ç®¡ç†å‘˜ï¼š

- [ ] ç¡®è®¤ç»§æ‰¿ç»„ç»‡å®‰å…¨è®¾ç½®
- [ ] é…ç½®åˆ†æ”¯ä¿æŠ¤è§„åˆ™
- [ ] å¯ç”¨ Required reviewsï¼ˆå¯é€‰ï¼‰
- [ ] ç¦æ­¢å¼ºåˆ¶æ¨é€ï¼ˆforce pushï¼‰

---

### æ‰€æœ‰å¼€å‘è€…

- [ ] äº†è§£æ¨é€ä¿æŠ¤æœºåˆ¶
- [ ] ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- [ ] ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†ç³»ç»Ÿ
- [ ] ä½¿ç”¨ `.gitignore` æ’é™¤æ•æ„Ÿæ–‡ä»¶

---

## ğŸš« è¢«é˜»æ­¢æ—¶æ€ä¹ˆåŠï¼Ÿ

### åœºæ™¯ 1ï¼šæ¨é€è¢«é˜»æ­¢

```bash
$ git push
remote: error: Secret scanning found the following secrets:
remote: 
remote: - GitHub Personal Access Token (ghp_xxxx...)
remote:   Found in: config.py:15
remote: 
remote: Push blocked. Please remove the secret and try again.
```

**è§£å†³æ–¹æ³•ï¼š**

1. åˆ é™¤æ•æ„Ÿä¿¡æ¯
2. æäº¤ä¿®æ”¹
3. é‡æ–°æ¨é€

```bash
# 1. ç¼–è¾‘æ–‡ä»¶åˆ é™¤æ•æ„Ÿä¿¡æ¯
vim config.py

# 2. æäº¤
git add config.py
git commit -m "remove sensitive data"

# 3. é‡æ–°æ¨é€
git push
```

### åœºæ™¯ 2ï¼šå·²ç»æ¨é€äº†æ•æ„Ÿä¿¡æ¯

**ç«‹å³è¡ŒåŠ¨ï¼š**

1. **æ’¤é”€å¯†é’¥** - ç«‹å³åœ¨æœåŠ¡æä¾›å•†å¤„æ’¤é”€æ³„éœ²çš„å¯†é’¥
2. **åˆ é™¤å†å²** - ä½¿ç”¨ `git filter-branch` æˆ– BFG Repo-Cleaner
3. **å¼ºåˆ¶æ¨é€** - æ¸…ç†åå¼ºåˆ¶æ¨é€

```bash
# ä½¿ç”¨ BFG Repo-Cleanerï¼ˆæ¨èï¼‰
bfg --replace-text passwords.txt

# æˆ–ä½¿ç”¨ git filter-branch
git filter-branch --force --index-filter \
  'git rm --cached --ignore-unmatch config/secrets.py' \
  --prune-empty --tag-name-filter cat -- --all

# å¼ºåˆ¶æ¨é€
git push --force --all
git push --force --tags
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ç¯å¢ƒå˜é‡

```python
import os

# âŒ é”™è¯¯
API_KEY = "sk_live_xxxxxxxxxxxxx"

# âœ… æ­£ç¡®
API_KEY = os.getenv("API_KEY")
```

### 2. ä½¿ç”¨ .env æ–‡ä»¶ï¼ˆä¸æäº¤ï¼‰

```bash
# .env
API_KEY=your_api_key_here
DATABASE_URL=postgres://user:pass@host/db
```

```python
# .gitignore
.env
.env.local
*.key
*.pem
```

### 3. ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡

- **AWS Secrets Manager**
- **Azure Key Vault**
- **HashiCorp Vault**
- **GitHub Secrets**ï¼ˆCI/CDï¼‰

### 4. ä»£ç å®¡æŸ¥

- åœ¨ PR ä¸­æ£€æŸ¥æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·è¾…åŠ©æ£€æŸ¥

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub Secret Scanning æ–‡æ¡£](https://docs.github.com/en/code-security/secret-scanning)
- [Push Protection æ–‡æ¡£](https://docs.github.com/en/code-security/secret-scanning/push-protection-for-repositories-and-organizations)
- [Dependabot æ–‡æ¡£](https://docs.github.com/en/code-security/dependabot)
- [åˆ†æ”¯ä¿æŠ¤è§„åˆ™](https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-protected-branches)

---

## âœ… å¯ç”¨åçš„å¥½å¤„

1. **è‡ªåŠ¨ä¿æŠ¤** - æ— éœ€æ‰‹åŠ¨æ£€æŸ¥
2. **å®æ—¶é˜»æ­¢** - æ¨é€æ—¶ç«‹å³æ£€æµ‹
3. **å…¨é¢è¦†ç›–** - æ”¯æŒ 200+ ç§å¯†é’¥ç±»å‹
4. **å†å²æ‰«æ** - æ‰«ææ‰€æœ‰å†å²æäº¤
5. **é€šçŸ¥æœºåˆ¶** - å‘ç°é—®é¢˜ç«‹å³é€šçŸ¥
6. **å®Œå…¨å…è´¹** - ğŸ†“ å…¬å¼€ä»“åº“å®Œå…¨å…è´¹ï¼

---

## ğŸ’¡ æœ€ä½³é€‰æ‹©

### æ¨èæ–¹æ¡ˆ

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | è´¹ç”¨ |
|------|---------|------|
| **å¼€æºé¡¹ç›®** | å…¬å¼€ä»“åº“ + ä»“åº“çº§é…ç½® | ğŸ†“ å…è´¹ |
| **å†…éƒ¨é¡¹ç›®** | ç§æœ‰ä»“åº“ + ç»„ç»‡çº§é…ç½® | ğŸ’° ä»˜è´¹ |
| **æ··åˆåœºæ™¯** | å¼€æºç”¨å…¬å¼€ï¼Œæ•æ„Ÿç”¨ç§æœ‰ | éƒ¨åˆ†å…è´¹ |

**æ¨èï¼šå°½å¯èƒ½ä½¿ç”¨å…¬å¼€ä»“åº“ï¼Œäº«å—å…è´¹çš„å®Œæ•´å®‰å…¨ä¿æŠ¤ï¼** ğŸ

---

**å¿«é€Ÿå¼€å§‹ï¼šåˆ›å»ºå…¬å¼€ä»“åº“ï¼Œç«‹å³å¯ç”¨æ‰€æœ‰å®‰å…¨åŠŸèƒ½ï¼** ğŸ›¡ï¸

